var express=require("express"),routes=require("./routes"),similar=require("./routes/similar"),searches=require("./routes/search"),mine=require("./routes/mine"),http=require("http"),path=require("path"),app=express();app.set("port",process.env.PORT||3e3),app.set("views",path.join(__dirname,"views")),app.set("view engine","jade"),app.use(express.favicon()),app.use(express.logger("dev")),app.use(express.bodyParser()),app.use(express.methodOverride()),app.use(app.router),app.use(express.static(path.join(__dirname,"public"))),"development"==app.get("env")&&app.use(express.errorHandler()),app.get("/",routes.index),app.get("/similar/:movie",similar.list),app.get("/search/:query",searches.list),app.post("/search",function(e,r){r.redirect("/search/"+e.body.searchbox),console.log(e.body)}),app.get("/mine",mine.list),http.createServer(app).listen(app.get("port"),function(){console.log("Express server listening on port "+app.get("port"))});