var builder=function(){return{setData:function(e,t){var r=e.querySelector(".simLink"),n=e.querySelector(".title"),a=e.querySelector(".rating"),i=e.querySelector(".fav"),o=document.createElement("img"),u=t.title,l=t.id,d=t.rating,c="http://image.tmdb.org/t/p/w300/",m=t.posterURL;return o.src=c+m,r.appendChild(o),r.setAttribute("href","/similar/"+l),i.setAttribute("data-film",u),i.setAttribute("data-id",l),i.setAttribute("data-rating",d),i.setAttribute("data-image",m),n.innerHTML=u,a.innerHTML=d,e},makeResult:function(e){var t=e.cloneNode(!0),r,n,a=document.createDocumentFragment(),i=document.getElementById("resultId");localforage.getItem("favourites",function(n){var o=document.querySelector(".result"),u;n&&(u=n.extraData),document.getElementById("resultId").removeChild(e);for(var l in u)if(u.hasOwnProperty(l)){var d=u[l];r=t.cloneNode(!0),builder.setData(r,d),a.appendChild(r)}i.appendChild(a)})},prepDelete:function(){document.getElementById("deleteData").addEventListener("click",function(){localforage.removeItem("favourites").then(function(){document.location.reload(!0)})})}}}();builder.prepDelete(),builder.makeResult(document.querySelector(".result"));